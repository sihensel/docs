Ubuntu 19.10 Webserver

--- GET YOUR OWN DOMAIN ---
http://noip.com         masks your ISP IP-adress with an URL so you can access your webserver without having to call your home IP

--- PORT FORWARDING ---
HTTP access     80, 8080, 443
FTP access      20, 21
SSH access      22
OpenVPN         1194 (by default, can be changed)


--- SERVICES ON THE WEBSERVER ---
apache2
vsftpd
openssh-server
openvpn


--- APACHE2 ---
-- installation --
sudo apt install apache2            check version with 'apache -version'
sudo ufw allow 'Apache Full'        allow ports 80 and 443 in the firewall
sudo sysctl enable apache2          should be enabled by default

to see if everything worked, open the localost in your webbrowser ('0.0.0.0', '127.0.0.1' or just type 'localhost'), it should show the apache default page

-- manage apache --
apache gets controlled by sysctl (kernel configuration)
sudo sysctl start apache2       works the same with 'restart', 'stop', 'enable', 'disable' and 'reload'

apache listens to port 80 and handels all requests targetet to this port
so if you call http://ip_adress:80 in your local network, it schows the apache page
if port forwarding is enabled properly, typing your domain name from noip.com into a webbrowser from outside your home network, should also show the apache landing page

-- files --
/var/www/html            default html root directory
index.html               main file, gets displayed first upon request 


--- VSFTPD ---
-- installation --
sudo apt install vsftpd
sudo sysctl enable vsftpd

for detailed setup see the online documentation (to enable local user access, etc)

-- manage FTP-server and requests --
sudo apt install filezilla          great GUI application for FTP requests and has many functions (also used on the client machine)

FTP requests can be handeled with both ports 21 and 22, with 22 being the secure one (as it is ssh encrypted)


--- OPENSSH-SERVER ---
-- installation --
sudo apt install openssh-server
sudo ufw allow ssh
sudo sysctl enable ssh

you can connect to a server via ssh in the terminal or via putty in windows


--- OPENVPN ---
for detailed installation insctructions and key generation and key exchange see the online tutorial

openvpn can only be used as a VPN server if the server has a different public IP than your home network



--- SERVER UTILITIES ---

--- CONNECT TO A SERVER WITH SSH ---
ssh -p 22 user@server_adress           connect to a user at the server using the specified port (22 for ssh)


--- COPY FILES USING SCP ---
-- from REMOTE to LOCAL --
scp -P 22 user@server_adress:/path/to/remote/file /path/to/local/directory

--from LOCAL to REMOTE --
scp -P 22 /path/to/local/file user@server_adress:/path/to/remote/direcotry

this works the same with whole directories, just add -r after scp:
scp -r -P ... etc ...




--- OUTDATED AND NO LONGER MAINTAINED --- NGROK SERVER ---

ngrok (moved to /usr/bin/)

ngrok http 80 (opens http(s) connection on port 80, so it can be accessed from anywhere on the web)
a random url gets generated and can be viewed from the NGROK website dashboard

the default html page can be viewed (and also gets routed to) 127.0.0.1 or by localhost
the ngrok inspect view can be called via localhost and port 4040: 127.0.0.1:4040 or localhost:4040

CONNECT VIA SSH
start tcp service on port 22 on webserver
the adress should look like this: tcp://0.tcp.ngrok.io:13212

now use ssh username@adress on the machine you want to use to access the server
the adress is 0.tcp.ngrok.io WITHOUT the tcp://, so dont specify the protocol
you need to futher specify the port within the ssh command with -p
so in this case:
ssh username@0.tcp.ngrok.io -p13212
so to connect to my server use ssh simon@0.tcp.ngrok.io -p13212

SCP (save copy)
remote to local
scp -P port simon@0.tcp.ngrok.io:/path/to/remote/file /path/to/local/directory
local to remote
scp -P port /path/to/local/file simon@0.tcp.ngrok.io:/path/to/remote/direcotry

--- END OF OUTDATED SECTION ---